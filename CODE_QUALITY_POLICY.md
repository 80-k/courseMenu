# 코드 품질 관리 방침

## 목적
코드베이스의 파편화와 중복을 예방하고, 일관된 품질을 유지하기 위한 기준과 방침을 제시합니다.

## 1. 코드 구조 원칙

### 1.1 단일 책임 원칙 (Single Responsibility Principle)
- **기준**: 하나의 파일/함수/컴포넌트는 하나의 명확한 책임만 가져야 함
- **방침**: 
  - 파일 크기 300줄 초과 시 분리 검토
  - 함수 복잡도 15 이상 시 리팩토링 필요
- **실행**: ESLint 규칙으로 자동 검사

### 1.2 DRY 원칙 (Don't Repeat Yourself)
- **기준**: 동일한 로직이 3회 이상 반복되면 공통화 필수
- **방침**: 
  - 유틸리티 함수, 커스텀 훅, 공통 컴포넌트로 추출
  - 상수는 별도 파일에서 중앙 관리
- **추적**: 매월 코드 중복 검사 실시

### 1.3 명명 규칙 일관성
- **기준**: 
  - 컴포넌트: PascalCase (예: `UserProfile`)
  - 파일명: PascalCase (예: `UserProfile.tsx`)
  - 함수/변수: camelCase (예: `getUserData`)
  - 상수: SCREAMING_SNAKE_CASE (예: `API_ENDPOINTS`)
- **방침**: 기능 기반 명명, 레이아웃 기반 명명 금지
- **검증**: PR 시 네이밍 컨벤션 체크리스트 확인

## 2. 파일 구조 관리

### 2.1 폴더 구조 표준화
```
src/
├── components/        # 재사용 가능한 UI 컴포넌트
│   ├── common/       # 공통 컴포넌트
│   └── feature/      # 기능별 전용 컴포넌트
├── pages/            # 페이지 컴포넌트
├── hooks/            # 커스텀 훅
├── contexts/         # React 컨텍스트
├── types/            # TypeScript 타입 정의
├── utils/            # 유틸리티 함수
├── constants/        # 상수 정의
└── config/           # 설정 파일
```

### 2.2 Import/Export 규칙
- **절대 경로 사용**: `src/`를 기준으로 한 절대 경로 사용
- **배럴 익스포트**: 각 폴더마다 `index.ts`로 공개 API 관리
- **순환 참조 방지**: 의존성 그래프 정기 검사

## 3. 중복 방지 전략

### 3.1 컴포넌트 중복 방지
- **기준**: 유사한 UI 패턴은 props로 변형 가능한 단일 컴포넌트로 구현
- **방침**: 
  - 새 컴포넌트 작성 전 기존 컴포넌트 재사용 가능성 검토
  - Compound Component 패턴으로 유연성 확보
- **도구**: Storybook으로 컴포넌트 인벤토리 관리

### 3.2 로직 중복 방지
- **기준**: 
  - 비즈니스 로직: 커스텀 훅으로 추출
  - 데이터 변환: 유틸리티 함수로 분리
  - API 호출: 서비스 레이어에서 중앙 관리
- **검증**: 매주 코드 리뷰 시 중복 로직 탐지

### 3.3 타입 중복 방지
- **기준**: 도메인별 타입 정의를 중앙화
- **방침**:
  - `types/core.ts`: 기본 타입
  - `types/api.ts`: API 관련 타입
  - `types/ui.ts`: UI 관련 타입
- **검증**: TypeScript strict mode 활성화

## 4. 파편화 방지 전략

### 4.1 관심사 분리
- **기준**: 각 모듈은 명확한 도메인 경계를 가져야 함
- **방침**:
  - UI 컴포넌트와 비즈니스 로직 분리
  - 데이터 접근과 표현 로직 분리
  - 전역 상태와 로컬 상태 명확히 구분

### 4.2 모듈 경계 관리
- **기준**: 모듈 간 의존성은 단방향이어야 함
- **도구**: dependency-cruiser로 의존성 그래프 시각화
- **검증**: CI/CD 파이프라인에서 순환 의존성 검사

## 5. 품질 추적 및 관리

### 5.1 자동화 도구
```json
{
  "scripts": {
    "quality:check": "npm run lint && npm run typecheck && npm run test",
    "quality:duplicates": "jscpd src/ --min-tokens 50",
    "quality:complexity": "plato -r -d complexity src/",
    "quality:deps": "dependency-cruiser src/"
  }
}
```

### 5.2 정기 감사
- **주간**: 코드 리뷰 시 품질 체크리스트 확인
- **월간**: 코드 메트릭 리포트 생성 및 리뷰
- **분기**: 아키텍처 리뷰 및 리팩토링 계획 수립

### 5.3 품질 지표
- **코드 중복률**: 5% 미만 유지
- **순환 복잡도**: 평균 10 미만
- **타입 커버리지**: 95% 이상
- **테스트 커버리지**: 80% 이상

## 6. 팀 프로세스

### 6.1 Pull Request 체크리스트
- [ ] 단일 책임 원칙 준수
- [ ] 명명 규칙 일관성
- [ ] 중복 코드 없음
- [ ] 타입 안전성 보장
- [ ] 테스트 코드 포함
- [ ] 문서 업데이트

### 6.2 코드 리뷰 가이드
- **구조적 검토**: 아키텍처 원칙 준수 여부
- **중복성 검토**: 기존 코드와의 중복 여부
- **재사용성 검토**: 향후 확장성 고려
- **성능 검토**: 불필요한 최적화 지양

## 7. 도구 및 설정

### 7.1 ESLint 규칙
```javascript
{
  "rules": {
    "max-lines": ["error", 300],
    "complexity": ["error", 15],
    "max-depth": ["error", 4],
    "no-duplicate-imports": "error"
  }
}
```

### 7.2 TypeScript 설정
```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true
  }
}
```

## 8. 지속적 개선

### 8.1 정기 리뷰
- 매월 첫째 주: 코드 품질 메트릭 리뷰
- 매분기 첫째 주: 아키텍처 개선 계획 수립
- 매반기: 품질 관리 프로세스 개선

### 8.2 교육 및 공유
- 월간 기술 세션: 품질 관리 베스트 프랙티스 공유
- 코드 리뷰 문화: 건설적 피드백을 통한 품질 향상
- 지식 문서화: 프로젝트별 품질 가이드 작성

---

**문서 버전**: 1.0  
**최종 수정일**: 2025-01-14  
**담당자**: 개발팀  
**검토 주기**: 분기별